/* ////////////////////////////////////////////////////////////
Shaiya Account Registration
Created By: [DEV]Lube - Hack & Slash Shaiya
Released For Public Use on Elitepvpers.
This release is free to use and alter, 
all this is requested is this header remain intact.
//////////////////////////////////////////////////////////// */
function isValidEmailAddress(emailAddress){var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);return pattern.test(emailAddress);};

function resetForm($form) {$('#captcha').shaiyaCaptcha();$form.find('input[type=text],input[type=range], input[type=password], input[type=email], input[type=file], select, textarea').val('');$form.find('input[type=radio], input[type=checkbox]').removeAttr('checked').removeAttr('selected');var holdit=setTimeout(function(){$form.find('input[type=submit]').prop("disabled", true);$form.find('input[name=pass_val]').prop("disabled", true);},300);};

function check_inputs($this){var invalid_input=false;$($this).find('input[type=text],input[type=range], input[type=password], input[type=email], input[type=file], select, textarea').each(function(index, element) {if($(element).val()==''){invalid_input=true;}});var delay_check=setTimeout(function(){if(invalid_input){$('input[type=submit]').prop("disabled", true);}else{$('input[type=submit]').prop("disabled", false);}},300);}function modal_close(){$('#modal_popup').fadeOut("slow",function(){$('#modal_content').empty();});}

(function($){$.fn.alphanumeric = function(p) {p = $.extend({ichars: "!@#$%^&*()+=[]\\\';,/{}|\":<>?~`.- ",nchars: "",allow: "",callback:""}, p);return this.each(function() {$(this).after('<span class="err"></span>');var err_container=$(this).next('span');if (p.nocaps) p.nchars += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";if (p.allcaps) p.nchars += "abcdefghijklmnopqrstuvwxyz";s = p.allow.split('');for ( i=0;i<s.length;i++) if (p.ichars.indexOf(s[i]) != -1) s[i] = "\\" + s[i];p.allow = s.join('|');var reg = new RegExp(p.allow,'gi');var ch = p.ichars + p.nchars;ch = ch.replace(reg,''); $(this).keypress(function (e){if (!e.charCode){k = String.fromCharCode(e.which);}else{ k = String.fromCharCode(e.charCode);}if (ch.indexOf(k) != -1){ e.preventDefault();err_container.html('Invalid character').stop().fadeIn("slow",function(){var warnem=setTimeout(function(){err_container.fadeOut(1000,function(){err_container.html('');});},1000);});}if (e.ctrlKey&&k=='v'){ e.preventDefault();}});$(this).bind('contextmenu',function () {return false});});};$.fn.numeric = function(p) {var az = "abcdefghijklmnopqrstuvwxyz";az += az.toUpperCase();p = $.extend({nchars: az }, p);return this.each (function(){$(this).alphanumeric(p);});};$.fn.alpha = function(p) {var nm = "1234567890";p = $.extend({nchars: nm }, p);return this.each (function(){$(this).alphanumeric(p);});};})(jQuery);

(function(){$.fn.emailvalidate = function(o) {o=$.extend({}, o);$(this).each(function(index, element) {$(element).after('<span class="err"></span>');$(element).blur(function(e) {var checkit=setTimeout(function(){var err_container=$(element).next('span');if(!isValidEmailAddress($(element).val())&&$(element).val()!==''){err_container.html('Invalid email format').stop().fadeIn("slow",function(){var warnem=setTimeout(function(){err_container.fadeOut(1000,function(){err_container.html('');});},1000);});$('input[type=submit]').prop("disabled", true);}},100);});});};})(jQuery);

(function(){$.fn.process_reg_form = function(o) {var $this=this;$(this).submit(function(e){e.preventDefault();var invalid=false;$($this).find('input[type=text],input[type=range], input[type=password], input[type=email], input[type=file], select, textarea').each(function(index, element) {if($(element).val()==''){invalid=true;} });if(invalid){alert('All fields must be filled in.');}else{$.ajax({url:$($this).prop("action"),type:$($this).prop("method"),dataType:"json",data:$($this).serialize(),beforeSend:function(){},error:function(){alert('Server reply error\n'+$($this).prop("action")+'\n'+$($this).prop("method")+'\n'+$($this).serialize());},success:function(data){$('#modal_popup').fadeOut("slow",function(){$('#modal_content').fadeIn("slow",function(){$(this).html(data["html"]);$('#modal_popup').fadeIn("slow",function(){});});});if(data["error"]==false){resetForm($this);$($this).find('input[type=submit]').prop("disabled", true);}}});}return false;});$($this).find('input[name=user]').keyup(function(e){var user=$(this).val();	if(user.length>=3){	$(this).check_username({});}else{$($this).find('input[type=submit]').prop("disabled", true);$(this).css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});}});$($this).find('input[name=display_name]').keyup(function(e){var display_name=$(this).val();if(display_name.length>=3){$(this).check_displayname({});}else{$($this).find('input[type=submit]').prop("disabled", true);$(this).css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});}});$($this).find('input[name=pass]').keyup(function(e){var pass=$(this).val();if(pass.length>=3){$($this).find('input[name=pass_val]').prop("disabled", false);$(this).css({"border-top":"2px groove rgba(0,0,0,0.4)","border-left":"2px groove rgba(0,0,0,0.4)","border-right":"2px groove rgba(0,0,0,0.1)","border-bottom":"2px groove rgba(0,0,0,0.1)"});}else{$($this).find('input[name=pass_val]').prop("disabled", true).val("");$($this).find('input[type=submit]').prop("disabled", true);$(this).css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});}});$($this).find('input[name=pass_val]').keyup(function(e){var pass=$('input[name=pass]').val();var pass_val=$(this).val();if(pass!==pass_val){$($this).find('input[type=submit]').prop("disabled", true);$(this).css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});}else{$(this).css({"border-top":"2px groove rgba(0,0,0,0.4)","border-left":"2px groove rgba(0,0,0,0.4)","border-right":"2px groove rgba(0,0,0,0.1)","border-bottom":"2px groove rgba(0,0,0,0.1)"});}});$($this).find('input[name=email]').keyup(function(e){var email=$(this).val();if(isValidEmailAddress(email)){$(this).css({"border-top":"2px groove rgba(0,0,0,0.4)","border-left":"2px groove rgba(0,0,0,0.4)","border-right":"2px groove rgba(0,0,0,0.1)","border-bottom":"2px groove rgba(0,0,0,0.1)"});}else{$($this).find('input[type=submit]').prop("disabled", true);$(this).css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});}});$($this).find('input[name=pass_question_answer]').keyup(function(e){var pass_question_answer=$(this).val();if(pass_question_answer.length>=2){$(this).css({"border-top":"2px groove rgba(0,0,0,0.4)","border-left":"2px groove rgba(0,0,0,0.4)","border-right":"2px groove rgba(0,0,0,0.1)","border-bottom":"2px groove rgba(0,0,0,0.1)"});}else{$($this).find('input[type=submit]').prop("disabled", true);$(this).css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});}});$($this).find('input, select').on("keyup change",function(e) {check_inputs($(this).closest('form'));});$($this).find('input[type=email]').emailvalidate({});$($this).find('input[type=text], input[type=password]').alphanumeric({allow:'._-'});$($this).find('.clear_form').click(function(e){e.preventDefault();resetForm($this);}); $($this).find('.pass_recover').click(function(e){e.preventDefault();$.post($($this).prop("action"),{"command":"pass_recover"},function(data){$(document).ready(function(e) {$('#modal_popup').fadeOut("slow",function(){$('#modal_content').fadeIn("slow",function(){$(this).html(data["html"]);$('#modal_popup').fadeIn("slow",function(){});});});});},"json");});};})(jQuery);

(function(){$.fn.process_rec_form = function(o) {var $this=this;$($this).find('input[type=text]:not(:disabled)').keyup(function(e){var rec_user=$(this).val();if(rec_user.length<=2){$($this).find('input[type=submit]').prop("disabled", true);$(this).css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});}else{$($this).find('input[type=submit]').prop("disabled", false);$(this).css({"border-top":"2px groove rgba(0,0,0,0.4)","border-left":"2px groove rgba(0,0,0,0.4)","border-right":"2px groove rgba(0,0,0,0.1)","border-bottom":"2px groove rgba(0,0,0,0.1)"});}}).alphanumeric({allow:'._-'});$($this).submit(function(e){e.preventDefault();	$.ajax({url:$($this).prop("action"),type:$($this).prop("method"),dataType:"json",data:$($this).serialize(),beforeSend:function(){$('#modal_popup').fadeOut("slow");},error:function(){alert('Server reply error\n'+$($this).prop("action")+'\n'+$($this).prop("method")+'\n'+$($this).serialize());},success:function(data){$('#modal_popup').fadeOut("slow",function(){	$('#modal_content').fadeIn("slow",function(){	$(this).html(data["html"]);	$('#modal_popup').fadeIn("slow",function(){});});});}});return false;});}})(jQuery);

(function($){$.fn.shaiyaCaptcha = function(options) {var settings=$.extend({url:'scripts/registration.php',data:{"command":"get_captcha"}},options);var captcha_container=$(this);$.post(settings.url,settings.data,function(captcha){captcha_container.html(captcha["html"]);$(document).ready(function(e) {$('input[type=radio]').change(function(e){check_inputs($(this).closest('form'))});});},"json");};})(jQuery);

(function($){$.fn.check_username = function(options) {var settings=$.extend({url:'scripts/registration.php',data:{"command":"check_user","user":$(this).val()}},options);var user_input=$(this);$.post(settings.url,settings.data,function(reply){if(reply["check"]==true){user_input.css({"border-top":"2px groove rgba(0,0,0,0.4)","border-left":"2px groove rgba(0,0,0,0.4)","border-right":"2px groove rgba(0,0,0,0.1)","border-bottom":"2px groove rgba(0,0,0,0.1)"});}else{user_input.css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});};},"json");}})(jQuery);

(function($){$.fn.check_displayname = function(options) {var settings=$.extend({url:'scripts/registration.php',data:{"command":"check_display","display_name":$(this).val()}},options);var user_input=$(this);$.post(settings.url,settings.data,function(reply){if(reply["check"]==true){user_input.css({"border-top":"2px groove rgba(0,0,0,0.4)","border-left":"2px groove rgba(0,0,0,0.4)","border-right":"2px groove rgba(0,0,0,0.1)","border-bottom":"2px groove rgba(0,0,0,0.1)"});}else{user_input.css({"border-top":"2px groove rgba(255,0,0,1)","border-left":"2px groove rgba(255,0,0,1)","border-right":"2px groove rgba(155,0,0,1)","border-bottom":"2px groove rgba(155,0,0,1)"});};},"json");}})(jQuery);